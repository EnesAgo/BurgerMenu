<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/frontend/content/add-ons/.gitkeep">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/content/add-ons/.gitkeep" />
              <option name="updatedContent" value="# This file ensures the add-ons folder is tracked by Git&#10;# You can delete this file once you add your first add-on item" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/frontend/content/special-deals/.gitkeep">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/content/special-deals/.gitkeep" />
              <option name="updatedContent" value="# This file ensures the special-deals folder is tracked by Git&#10;# You can delete this file once you add your first special deal" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/frontend/src/pages/index.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/src/pages/index.tsx" />
              <option name="originalContent" value="import { GetStaticProps } from &quot;next&quot;;&#10;import HomePage from &quot;@/components/HomePage&quot;;&#10;import { useEffect, useState } from &quot;react&quot;;&#10;&#10;interface Product {&#10;    title: string;&#10;    price: number;&#10;    description: string;&#10;    image: string;&#10;    slug: string;&#10;}&#10;&#10;interface SpecialDeal {&#10;    name: string;&#10;    image: string;&#10;    day: string;&#10;    slug: string;&#10;}&#10;&#10;interface AddOn {&#10;    title: string;&#10;    price: number;&#10;    category: string;&#10;    image: string;&#10;    slug: string;&#10;}&#10;&#10;interface HomeProps {&#10;    products: Product[];&#10;    specialDeals: SpecialDeal[];&#10;    addOns: AddOn[];&#10;}&#10;&#10;// Helper function to fetch data from GitHub API&#10;const fetchDataFromGitHub = async (path: string): Promise&lt;any[]&gt; =&gt; {&#10;    const repo = &quot;EnesAgo/BurgerMenu&quot;;&#10;&#10;    try {&#10;        const listRes = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`);&#10;&#10;        if (!listRes.ok) {&#10;            console.error(`Failed to fetch files from GitHub path ${path}:`, listRes.statusText);&#10;            return [];&#10;        }&#10;&#10;        const files = await listRes.json();&#10;&#10;        const data = await Promise.all(&#10;            files&#10;                .filter((file: any) =&gt; file.name.endsWith(&quot;.json&quot;))&#10;                .map(async (file: any) =&gt; {&#10;                    const res = await fetch(file.download_url);&#10;                    const data = await res.json();&#10;                    return { ...data, slug: file.name.replace(&quot;.json&quot;, &quot;&quot;) };&#10;                })&#10;        );&#10;&#10;        return data;&#10;    } catch (error) {&#10;        console.error(`Error fetching data from ${path}:`, error);&#10;        return [];&#10;    }&#10;};&#10;&#10;// Specific fetch functions for each collection&#10;const fetchProducts = async (): Promise&lt;Product[]&gt; =&gt; {&#10;    return await fetchDataFromGitHub(&quot;frontend/content/products&quot;);&#10;};&#10;&#10;const fetchSpecialDeals = async (): Promise&lt;SpecialDeal[]&gt; =&gt; {&#10;    return await fetchDataFromGitHub(&quot;frontend/content/special-deals&quot;);&#10;};&#10;&#10;const fetchAddOns = async (): Promise&lt;AddOn[]&gt; =&gt; {&#10;    return await fetchDataFromGitHub(&quot;frontend/content/add-ons&quot;);&#10;};&#10;&#10;export default function Home({ products: initialProducts, specialDeals: initialSpecialDeals, addOns: initialAddOns }: HomeProps) {&#10;    const [products, setProducts] = useState&lt;Product[]&gt;(initialProducts);&#10;    const [specialDeals, setSpecialDeals] = useState&lt;SpecialDeal[]&gt;(initialSpecialDeals);&#10;    const [addOns, setAddOns] = useState&lt;AddOn[]&gt;(initialAddOns);&#10;&#10;    useEffect(() =&gt; {&#10;        console.log(&quot;Current products:&quot;, products);&#10;        console.log(&quot;Current special deals:&quot;, specialDeals);&#10;        console.log(&quot;Current add-ons:&quot;, addOns);&#10;&#10;        // Fetch fresh data immediately on mount&#10;        const updateAllData = async () =&gt; {&#10;            const [freshProducts, freshSpecialDeals, freshAddOns] = await Promise.all([&#10;                fetchProducts(),&#10;                fetchSpecialDeals(),&#10;                fetchAddOns()&#10;            ]);&#10;&#10;            if (freshProducts.length &gt; 0) {&#10;                setProducts(freshProducts);&#10;                console.log(&quot;Updated products:&quot;, freshProducts);&#10;            }&#10;&#10;            if (freshSpecialDeals.length &gt;= 0) { // Allow empty arrays&#10;                setSpecialDeals(freshSpecialDeals);&#10;                console.log(&quot;Updated special deals:&quot;, freshSpecialDeals);&#10;            }&#10;&#10;            if (freshAddOns.length &gt;= 0) { // Allow empty arrays&#10;                setAddOns(freshAddOns);&#10;                console.log(&quot;Updated add-ons:&quot;, freshAddOns);&#10;            }&#10;        };&#10;&#10;        // Initial fetch&#10;        updateAllData();&#10;&#10;        // Set up interval to fetch every 60 seconds&#10;        const interval = setInterval(updateAllData, 60000); // 60 seconds&#10;&#10;        // Cleanup interval on unmount&#10;        return () =&gt; clearInterval(interval);&#10;    }, []);&#10;&#10;    return (&#10;        &lt;main className={&quot;w-[100%] h-[100%] bg-[#393D47]&quot;}&gt;&#10;            &lt;HomePage products={products} specialDeals={specialDeals} addOns={addOns} /&gt;&#10;        &lt;/main&gt;&#10;    );&#10;}&#10;&#10;export const getStaticProps: GetStaticProps = async () =&gt; {&#10;    const [products, specialDeals, addOns] = await Promise.all([&#10;        fetchProducts(),&#10;        fetchSpecialDeals(),&#10;        fetchAddOns()&#10;    ]);&#10;&#10;    return {&#10;        props: { products, specialDeals, addOns },&#10;        revalidate: 60, // Regenerate every minute (ISR) - fallback for SEO&#10;    };&#10;};&#10;" />
              <option name="updatedContent" value="import { GetStaticProps } from &quot;next&quot;;&#10;import HomePage from &quot;@/components/HomePage&quot;;&#10;import { useEffect, useState } from &quot;react&quot;;&#10;&#10;interface Product {&#10;    title: string;&#10;    price: number;&#10;    description: string;&#10;    image: string;&#10;    slug: string;&#10;}&#10;&#10;interface SpecialDeal {&#10;    name: string;&#10;    image: string;&#10;    day: string;&#10;    slug: string;&#10;}&#10;&#10;interface AddOn {&#10;    title: string;&#10;    price: number;&#10;    category: string;&#10;    image: string;&#10;    slug: string;&#10;}&#10;&#10;interface HomeProps {&#10;    products: Product[];&#10;    specialDeals: SpecialDeal[];&#10;    addOns: AddOn[];&#10;}&#10;&#10;// Helper function to fetch data from GitHub API&#10;const fetchDataFromGitHub = async (path: string): Promise&lt;any[]&gt; =&gt; {&#10;    const repo = &quot;EnesAgo/BurgerMenu&quot;;&#10;&#10;    try {&#10;        const listRes = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`);&#10;        &#10;        // Handle 404 errors (folder doesn't exist or is empty in GitHub)&#10;        if (listRes.status === 404) {&#10;            console.log(`Folder ${path} not found in GitHub repository (likely empty)`);&#10;            return [];&#10;        }&#10;&#10;        if (!listRes.ok) {&#10;            console.error(`Failed to fetch files from GitHub path ${path}:`, listRes.status, listRes.statusText);&#10;            return [];&#10;        }&#10;&#10;        const files = await listRes.json();&#10;&#10;        // Filter out .gitkeep files and only process .json files&#10;        const jsonFiles = files.filter((file: any) =&gt; file.name.endsWith(&quot;.json&quot;));&#10;&#10;        if (jsonFiles.length === 0) {&#10;            console.log(`No JSON files found in ${path}`);&#10;            return [];&#10;        }&#10;&#10;        const data = await Promise.all(&#10;            jsonFiles.map(async (file: any) =&gt; {&#10;                const res = await fetch(file.download_url);&#10;                const data = await res.json();&#10;                return { ...data, slug: file.name.replace(&quot;.json&quot;, &quot;&quot;) };&#10;            })&#10;        );&#10;&#10;        return data;&#10;    } catch (error) {&#10;        console.error(`Error fetching data from ${path}:`, error);&#10;        return [];&#10;    }&#10;};&#10;&#10;// Specific fetch functions for each collection&#10;const fetchProducts = async (): Promise&lt;Product[]&gt; =&gt; {&#10;    return await fetchDataFromGitHub(&quot;frontend/content/products&quot;);&#10;};&#10;&#10;const fetchSpecialDeals = async (): Promise&lt;SpecialDeal[]&gt; =&gt; {&#10;    return await fetchDataFromGitHub(&quot;frontend/content/special-deals&quot;);&#10;};&#10;&#10;const fetchAddOns = async (): Promise&lt;AddOn[]&gt; =&gt; {&#10;    return await fetchDataFromGitHub(&quot;frontend/content/add-ons&quot;);&#10;};&#10;&#10;export default function Home({ products: initialProducts, specialDeals: initialSpecialDeals, addOns: initialAddOns }: HomeProps) {&#10;    const [products, setProducts] = useState&lt;Product[]&gt;(initialProducts);&#10;    const [specialDeals, setSpecialDeals] = useState&lt;SpecialDeal[]&gt;(initialSpecialDeals);&#10;    const [addOns, setAddOns] = useState&lt;AddOn[]&gt;(initialAddOns);&#10;&#10;    useEffect(() =&gt; {&#10;        console.log(&quot;Current products:&quot;, products);&#10;        console.log(&quot;Current special deals:&quot;, specialDeals);&#10;        console.log(&quot;Current add-ons:&quot;, addOns);&#10;&#10;        // Fetch fresh data immediately on mount&#10;        const updateAllData = async () =&gt; {&#10;            const [freshProducts, freshSpecialDeals, freshAddOns] = await Promise.all([&#10;                fetchProducts(),&#10;                fetchSpecialDeals(),&#10;                fetchAddOns()&#10;            ]);&#10;&#10;            if (freshProducts.length &gt; 0) {&#10;                setProducts(freshProducts);&#10;                console.log(&quot;Updated products:&quot;, freshProducts);&#10;            }&#10;&#10;            if (freshSpecialDeals.length &gt;= 0) { // Allow empty arrays&#10;                setSpecialDeals(freshSpecialDeals);&#10;                console.log(&quot;Updated special deals:&quot;, freshSpecialDeals);&#10;            }&#10;&#10;            if (freshAddOns.length &gt;= 0) { // Allow empty arrays&#10;                setAddOns(freshAddOns);&#10;                console.log(&quot;Updated add-ons:&quot;, freshAddOns);&#10;            }&#10;        };&#10;&#10;        // Initial fetch&#10;        updateAllData();&#10;&#10;        // Set up interval to fetch every 60 seconds&#10;        const interval = setInterval(updateAllData, 60000); // 60 seconds&#10;&#10;        // Cleanup interval on unmount&#10;        return () =&gt; clearInterval(interval);&#10;    }, []);&#10;&#10;    return (&#10;        &lt;main className={&quot;w-[100%] h-[100%] bg-[#393D47]&quot;}&gt;&#10;            &lt;HomePage products={products} specialDeals={specialDeals} addOns={addOns} /&gt;&#10;        &lt;/main&gt;&#10;    );&#10;}&#10;&#10;export const getStaticProps: GetStaticProps = async () =&gt; {&#10;    const [products, specialDeals, addOns] = await Promise.all([&#10;        fetchProducts(),&#10;        fetchSpecialDeals(),&#10;        fetchAddOns()&#10;    ]);&#10;&#10;    return {&#10;        props: { products, specialDeals, addOns },&#10;        revalidate: 60, // Regenerate every minute (ISR) - fallback for SEO&#10;    };&#10;};" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>